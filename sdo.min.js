(function(){var t,n,e,i,s,r,h,l,o,u,a=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1},c=[].slice,g={}.hasOwnProperty;o=Array.prototype.slice,u=Object.prototype.toString,Object.create||(Object.create=function(){var t;return t=function(){},function(n){return t.prototype=n,new t}}()),h=function(){var t,n,e,i,s,r;for(n=/\[object HTML(.*)\]/,t={},r="Array Boolean Date Function NodeList Null Number RegExp String Undefined ".split(" "),i=0,s=r.length;s>i;i++)e=r[i],t["[object "+e+"]"]=e.toLowerCase();return function(e){var i,s;return s=u.call(e),(i=t[s])?i:(i=s.match(n))?i[1].toLowerCase():"object"}}(),r=function(t){var n,e,i,s,r,h;for(h=o.call(arguments,1),s=0,r=h.length;r>s;s++)if(e=h[s])for(n in e)i=e[n],t[n]=i;return t},l=function(t){var n;for(null==t&&(t=36),n=(new Date).getTime();n<=l._prev;)n+=1;return l._prev=n,n.toString(t)},s={onChange:function(t,n){var e;return null==n&&(n=!0),this._listeners||(this._listeners=[]),n?a.call(this._listeners,t)<0&&this._listeners.push(t):this._listeners=function(){var n,i,s,r;for(s=this._listeners,r=[],n=0,i=s.length;i>n;n++)e=s[n],e!==t&&r.push(e);return r}.call(this),this},_changed:function(){var t,n,e,i,s;if(n=1<=arguments.length?c.call(arguments,0):[],!(null!=this._listeners&&this._listeners.length>0))return this;for(s=this._listeners,e=0,i=s.length;i>e;e++)t=s[e],t.apply(null,n);return this}},n=r({},s,{type:"hash",isHash:!0,isList:!1,setPair:function(t,n,e){var i;return n!==this._atts[t]?(i=this._atts[t],null!=i&&"function"==typeof i.onChange&&i.onChange(this._changed,!1),this._atts[t]=n,e||this._changed([t],this),null!=n&&"function"==typeof n.onChange&&n.onChange(this._changed),!0):!1},set:function(t,n,e){var i,s,r;if("string"===h(t))return this.setPair(t,n,e);s=[];for(i in t)g.call(t,i)&&(r=t[i],this.setPair(i,r,!0)&&s.push(i));return s.length>0?(e||this._changed(s,this),!0):!1},get:function(t){var n,e,i;if(0===arguments.length){n={},i=this._atts;for(t in i)e=i[t],n[t]=(null!=e?"function"==typeof e.get?e.get():void 0:void 0)||e;return n}return this._atts[t]},remove:function(t,n){var e;return _hasOwn.call(this._atts,t)?(e=this._atts[t],"function"==typeof e.onChange&&e.onChange(this._changed,!1),delete this._atts[t],n||this._changed([t],this),e):null},toString:function(){return"[object Hash]"}}),t=function(t,e){var i;return null==t&&(t={}),i=Object.create(n),i._atts={},i.set(t,null,!0),null!=e&&i.onChange(e),i._changed=i._changed.bind(i),i},i=r({},s,{type:"list",isHash:!1,isList:!0,add:function(t,n){return a.call(this._list,t)<0&&(this._list.push(t),null!=t&&"function"==typeof t.onChange&&t.onChange(this._changed),this.length=this._list.length,n||this._changed("add",this,t)),this},addAll:function(t,n){var e,i,s;for(i=0,s=t.length;s>i;i++)e=t[i],this.add(e,n);return this},remove:function(t,n){var e;return this._list=function(){var n,i,s,r;for(s=this._list,r=[],n=0,i=s.length;i>n;n++)e=s[n],e!==t&&r.push(e);return r}.call(this),null!=t&&"function"==typeof t.onChange&&t.onChange(this._changed,!0),this.length=this._list.length,n||this._changed("remove",this,t),this},get:function(t){var n,e,i,s,r;if(0===arguments.length){for(s=this._list,r=[],e=0,i=s.length;i>e;e++)n=s[e],r.push((null!=n?"function"==typeof n.get?n.get():void 0:void 0)||n);return r}return this._list[t]},items:function(){return this._list},toString:function(){return"[object List]"}}),e=function(t,n){var e;return null==t&&(t=[]),e=Object.create(i),e._list=[],e.addAll(t,!0),null!=n&&e.onChange(n),e._changed=e._changed.bind(e),e},"undefined"!=typeof module&&null!==module?(module.exports.Hash=t,module.exports.List=e,module.exports.type=h,module.exports.uid=l):(this.Hash=t,this.List=e,this.type=h,this.uid=l)}).call(this);